snippets:
  - id: db_postgres_settings_fields
    target: src/modules/free/essentials/settings/settings.py
    anchor: "# <<<inject:settings-fields>>>"
    template: settings_fields.snippet.j2
    features: [extendable_settings, db_postgres]
    profiles: [fastapi/standard, fastapi/pro, fastapi/ai, fastapi/ddd]
    description: Inject PostgreSQL settings fields into generated settings module
    version: "1.0.0"
    priority: 5
    dependencies: []
    context:
      database_url: "postgresql://postgres:postgres@localhost:5432/myapp"
      test_database_url: "postgresql://postgres:postgres@localhost:5432/myapp_test"
      db_pool_size: 10
      db_max_overflow: 20
      db_pool_recycle: 3600
      db_pool_timeout: 30
      db_echo: false
      db_expire_on_commit: false
    schema:
      type: object
      properties: {}
      additionalProperties: true
      required: []
    metadata:
      author: "RapidKit Team"
      created_at: "2025-10-24"
      last_modified: "2025-11-17"
    conflict_resolution: merge

  - id: db_postgres_env_defaults
    target: .env,.env.dev,.env.prod,.env.example
    anchor: "# <<<inject:module-env>>>"
    template: db_postgres.snippet.j2
    features: [db_postgres, database]
    profiles: [fastapi/standard, fastapi/pro, fastapi/ai, fastapi/ddd, nestjs/standard]
    description: Injects PostgreSQL environment variable defaults across kit profiles.
    version: "1.0.0"
    priority: 8
    dependencies: []
    context:
      database_url: "postgresql://postgres:postgres@localhost:5432/myapp"
      test_database_url: "postgresql://postgres:postgres@localhost:5432/myapp_test"
      db_pool_size: 10
      db_max_overflow: 20
      db_pool_recycle: 3600
      db_pool_timeout: 30
      db_echo: false
    schema:
      type: object
      properties: {}
      additionalProperties: true
      required: []
    metadata:
      author: "RapidKit Team"
      created_at: "2025-11-17"
      last_modified: "2025-11-17"
    conflict_resolution: merge

  - id: db_postgres_settings_fields_nestjs
    target: src/config/configuration.ts
    anchor: "// <<<inject:configuration>>>"
    template: db_postgres_settings_fields_nestjs.snippet.j2
    features: [db_postgres, database]
    profiles: [nestjs/standard]
    description: Adds strongly typed PostgreSQL configuration helpers for NestJS kits.
    version: "1.0.0"
    priority: 5
    dependencies: []
    context:
      database_url: "postgresql://postgres:postgres@localhost:5432/myapp"
      test_database_url: "postgresql://postgres:postgres@localhost:5432/myapp_test"
      db_pool_size: 10
      db_max_overflow: 20
      db_pool_recycle: 3600
      db_pool_timeout: 30
      db_echo: false
      db_expire_on_commit: false
    schema:
      type: object
      properties: {}
      additionalProperties: true
      required: []
    metadata:
      author: "RapidKit Team"
      created_at: "2025-11-17"
      last_modified: "2025-11-17"
    conflict_resolution: merge

  - id: db_postgres_nestjs_module_registry
    target: src/modules/index.ts
    anchor: "// <<<inject:module-exports>>>"
    template: db_postgres.nestjs.module_registry.snippet.j2
    features: [db_postgres]
    profiles: [nestjs/standard]
    description: Register DatabasePostgresModule in NestJS optional module registry
    version: "1.0.0"
    priority: 30
    dependencies: []
    schema:
      type: object
      properties: {}
      additionalProperties: true
      required: []
    metadata:
      author: "RapidKit Team"
      created_at: "2026-02-15"
      last_modified: "2026-02-15"
    conflict_resolution: merge

  - id: db_postgres_nestjs_health_registry
    target: src/modules/index.ts
    anchor: "// <<<inject:module-exports>>>"
    template: db_postgres.nestjs.health_registry.snippet.j2
    features: [db_postgres]
    profiles: [nestjs/standard]
    description: Register DatabasePostgresHealthModule in NestJS optional module registry
    version: "1.0.0"
    priority: 31
    dependencies: []
    schema:
      type: object
      properties: {}
      additionalProperties: true
      required: []
    metadata:
      author: "RapidKit Team"
      created_at: "2026-02-15"
      last_modified: "2026-02-15"
    conflict_resolution: merge
